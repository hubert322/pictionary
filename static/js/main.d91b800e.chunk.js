(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,n){},150:function(e,n,t){},154:function(e,n,t){},155:function(e,n,t){},157:function(e,n,t){},158:function(e,n,t){},159:function(e,n,t){},160:function(e,n,t){},161:function(e,n,t){},162:function(e,n,t){},164:function(e,n,t){},165:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),r=t(11),c=t.n(r),l=(t(101),t(102),t(24)),u=t(26),i=t(6),s=t(54),m=t.n(s),d=t(82),f=t(55),p=t.n(f),b=t(83),v="https://pictionary-live.herokuapp.com",g=768,h=t.n(b)()(v,{transports:["websocket"]});function E(e,n,t,a){e=e.toLowerCase(),h.emit("send_join_room",{gameCode:e,pid:n,playerName:t}),h.on("join_room_success",function(t){h.off("join_room_success"),O(e,n,a)}),h.on("join_room_error",function(e){h.off("join_room_error"),alert("join room error")})}function C(){return(C=Object(d.a)(m.a.mark(function e(){var n,t,a,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=localStorage.getItem("pid"))){e.next=17;break}return e.prev=2,t={pid:n},e.next=6,p.a.post(v+"/api/player/isValid",t);case 6:if(a=e.sent,console.log(a.data),!a.data.isValid){e.next=10;break}return e.abrupt("return",n);case 10:e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(2),alert("Error checking pid. Please reload the page."),console.log(e.t0.response),e.abrupt("return",null);case 17:return e.prev=17,e.next=20,p.a.post(v+"/api/player/new");case 20:return o=e.sent,console.log(o.data),n=o.data.pid,localStorage.setItem("pid",n),e.abrupt("return",n);case 27:return e.prev=27,e.t1=e.catch(17),alert("Failed to get pid. Please reload the page."),console.log(e.t1.response),e.abrupt("return",null);case 32:case"end":return e.stop()}},e,null,[[2,12],[17,27]])}))).apply(this,arguments)}function O(e,n,t){h.on("join_room_announcement",function(a){h.off("join_room_announcement"),a.gameCode=e,a.pid=n,t.push("/room?gameCode=".concat(e),a)})}function y(){var e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),n=Object(i.a)(e,2),t=n[0],o=n[1];return Object(a.useLayoutEffect)(function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),t}t(150);var _=Object(a.forwardRef)(function(e,n){var t=e.children,a=e.className,r=e.customRef;return o.a.createElement("div",{className:"Panel ".concat(a),ref:r},t)});_.displayName="Panel",_.defaultProps={children:[],className:"",customRef:null};var w=_,j=t(205),N=t(195),k=Object(N.a)({textField:{margin:"7px","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#f64f59"},"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#c471ed"},"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#12c2e9"},"& .MuiOutlinedInput-root":{color:"white"},"& label":{color:"white"},"& label.Mui-focused":{color:"white"}}});function P(e){var n=k(),t=e.label,a=e.variant,r=e.value,c=e.onChange,l=e.error,u=e.inputRef,i=e.onKeyDown,s=e.className;return o.a.createElement(j.a,{label:t,variant:a,value:r,onChange:c,error:l,inputRef:u,onKeyDown:i,className:"".concat(n.textField," ").concat(s)})}P.defaultProps={label:null,variant:"standard",value:null,onChange:null,error:null,inputRef:null,onKeyDown:null,className:""};var R=P,S=t(0),F=t(19);t(154);var x=function(){return o.a.createElement("div",{className:"Footer"},o.a.createElement("p",{className:"FooterText"},"Created by"," ",o.a.createElement("a",{className:"FooterLink",href:"https://huberthung.me",target:"_blank",rel:"noopener noreferrer"},"Hubert Hung")),o.a.createElement("a",{className:"FooterLink",href:"https://github.com/hubert322/pictionary",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(S.b.Provider,{value:{size:"2.2rem"}},o.a.createElement(F.c,null))))};t(35),t(155);var M=function(){var e=Object(a.useState)(""),n=Object(i.a)(e,2),t=n[0],r=n[1],c=function(e,n){var t=Object(a.useState)(localStorage.getItem(e)||n),o=Object(i.a)(t,2),r=o[0],c=o[1];return Object(a.useEffect)(function(){localStorage.setItem(e,r)},[r]),[r,c]}("playerName",""),s=Object(i.a)(c,2),m=s[0],d=s[1],f=Object(a.useState)("Name"),p=Object(i.a)(f,2),b=p[0],v=p[1],g=Object(a.useState)(!1),y=Object(i.a)(g,2),_=y[0],j=y[1],N=Object(a.useState)("Game Code"),k=Object(i.a)(N,2),P=k[0],S=k[1],F=Object(a.useState)(!1),M=Object(i.a)(F,2),T=M[0],I=M[1],G=Object(a.useState)(null),B=Object(i.a)(G,2),L=B[0],D=B[1],W=Object(u.f)();return Object(a.useEffect)(function(){(function(){return C.apply(this,arguments)})().then(function(e){D(e)})},[]),o.a.createElement("div",{className:"Home"},o.a.createElement(l.b,{to:"/",className:"HomeTitle"},"Pictionary Live"),null!==L?o.a.createElement(w,{className:"HomeMainContainer"},o.a.createElement(R,{label:b,variant:"outlined",value:m,onChange:function(e){return d(e.target.value)},error:_}),o.a.createElement("div",{className:"HomeJoinGameContainer"},o.a.createElement(R,{label:P,variant:"outlined",className:"HomeJoinGameTextField",value:t,onChange:function(e){return r(e.target.value)},error:T}),o.a.createElement("button",{type:"button",className:"Button HomeJoinGameButton",onClick:function(){""===t||""===m?(""===t&&(I(!0),S("Game Code required")),""===m&&(j(!0),v("Name required"))):"string"!==typeof L?console.log("Waiting for promise to resolve..."):E(t,L,m,W)}},"Join Game")),o.a.createElement("button",{type:"button",className:"Button HomeNewGameButton",onClick:function(){""===m?(j(!0),v("Name required")):"string"!==typeof L?console.log("Waiting for promise to resolve..."):function(e,n,t){h.emit("send_new_room",{pid:e,playerName:n}),h.on("new_room_success",function(n){h.off("new_room_success"),O(n.gameCode,e,t)}),h.on("new_room_error",function(e){alert("new room error"),console.log(e),h.off("new_room_error")})}(L,m,W)}},"New Game")):o.a.createElement("p",null,"Loading..."),o.a.createElement(x,null))},T=t(203),I=t(202),G=t(200),B=t(44);t(157);var L=Object(N.a)({formControl:{margin:"0px 7px","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#f64f59"},"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#c471ed"},"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#12c2e9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.38)"},"& .Mui-disabled":{cursor:"not-allowed"},"& .MuiOutlinedInput-root":{color:"white"},"& .MuiOutlinedInput-root.Mui-disabled":{color:"rgba(255, 255, 255, 0.38)"},"& label":{color:"white"},"& label.Mui-focused":{color:"white"},"& label.Mui-disabled":{color:"rgba(255, 255, 255, 0.54)"},"& option":{color:"black"},"& .MuiSelect-icon":{fill:"white"},"& .MuiSelect-icon.Mui-disabled":{fill:"rgba(255, 255, 255, 0.26)"}}});var D=function(){var e=L(),n=Object(u.g)().state,t=n.gameCode,r=n.pid,c=Object(a.useState)(n.players),s=Object(i.a)(c,2),m=s[0],d=s[1],f=Object(a.useState)(n.ownerPid),p=Object(i.a)(f,2),b=p[0],v=p[1],E=Object(a.useState)(n.rounds),C=Object(i.a)(E,2),O=C[0],_=C[1],j=Object(a.useState)(n.drawTime.toString()+"s"),N=Object(i.a)(j,2),k=N[0],P=N[1],R=y().width,x=Object(u.f)();return Object(a.useEffect)(function(){return h.on("join_room_announcement",function(e){d(e.players),v(e.ownerPid)}),function(){h.off("join_room_announcement")}},[]),Object(a.useEffect)(function(){return h.on("rounds_announcement",function(e){_(e.rounds)}),function(){h.off("rounds_announcement")}}),Object(a.useEffect)(function(){return h.on("draw_time_announcement",function(e){P(e.drawTime.toString()+"s")}),function(){h.off("draw_time_announcement")}}),Object(a.useEffect)(function(){return h.on("play_game_announcement",function(){console.log("YO"),x.push("/game?gameCode=".concat(t),{gameCode:t,pid:r,players:m,ownerPid:b,drawTime:parseInt(k.slice(0,-1))})}),function(){h.off("play_game_announcement")}},[t,r,m,x]),Object(a.useEffect)(function(){return h.on("room_disconnect_announcement",function(e){console.log(e),d(e.players),v(e.ownerPid)}),function(){h.off("room_disconnect_announcement")}},[]),o.a.createElement("div",{className:"Room"},o.a.createElement(l.b,{to:"/",className:"RoomTitleLink"},"Pictionary Live"),o.a.createElement("h2",{className:"RoomGameCode"},"Game Code: ",t),o.a.createElement("div",{className:"RoomMainContainer"},o.a.createElement(w,{className:"RoomPlayersContainer"},o.a.createElement("h3",{className:"RoomContainerTitle"},"Players"),o.a.createElement("div",{className:"RoomPlayersList"},m.map(function(e){return o.a.createElement("div",{className:"RoomPlayer",key:e._id},o.a.createElement(S.b.Provider,{value:{size:R>=g?"3rem":"2rem"}},e._id===b?o.a.createElement(F.b,null):o.a.createElement(B.a,null)),o.a.createElement("span",{className:"RoomPlayerName"},e.playerName),o.a.createElement("span",{className:"RoomPlayerTag"},e._id===r?"You":" "))}))),o.a.createElement(w,{className:"RoomGameControlsContainer"},o.a.createElement("h3",{className:"RoomContainerTitle"},"Settings"),o.a.createElement(T.a,{variant:"outlined",className:e.formControl,disabled:r!==b},o.a.createElement(I.a,{htmlFor:"roundsSelector"},"Rounds"),o.a.createElement(G.a,{native:!0,label:"Rounds",value:O,onChange:function(e){return function(e,n){console.log(n),n=parseInt(n),h.emit("send_rounds",{gameCode:e,rounds:n})}(t,e.target.value)},inputProps:{id:"roundsSelector"}},o.a.createElement("option",null,"3"),o.a.createElement("option",null,"5"),o.a.createElement("option",null,"10"))),o.a.createElement(T.a,{variant:"outlined",className:e.formControl,disabled:r!==b},o.a.createElement(I.a,{htmlFor:"drawTimeSelector"},"Draw Time"),o.a.createElement(G.a,{native:!0,label:"Draw Time",value:k,onChange:function(e){return function(e,n){n=parseInt(n.slice(0,-1)),h.emit("send_draw_time",{gameCode:e,drawTime:n})}(t,e.target.value)},inputProps:{id:"drawTime"}},o.a.createElement("option",null,"30s"),o.a.createElement("option",null,"60s"),o.a.createElement("option",null,"90s"))),o.a.createElement("button",{type:"button",className:"Button RoomPlayButton",onClick:function(){m.length>1&&function(e,n,t){t=parseInt(t.slice(0,-1)),h.emit("send_play_game",{gameCode:e,rounds:n,drawTime:t})}(t,O,k)},disabled:r!==b||m.length<=1},"Play"))))};t(158);function W(e){var n=e.players,t=e.pid,a=e.ownerPid,r=e.artistPid,c=e.guessedCorrectPids,l=e.rankings,u=y().width;return o.a.createElement(w,{className:"PlayersList"},n.map(function(e,n){var i=e.playerName,s=e._id,m=e.score;return o.a.createElement("div",{className:"PlayersListPlayer",key:s,style:{backgroundColor:c.hasOwnProperty(s)?"rgb(35, 231, 17)":"transparent"}},o.a.createElement("div",{className:"PlayersListPlayerRankingIcon"},o.a.createElement("span",{className:"PlayersListRanking"},"#",l[n]),o.a.createElement(S.b.Provider,{value:{size:u>=g?"1.8rem":"1.5rem"}},s===a?o.a.createElement(F.b,null):o.a.createElement(B.a,null)),o.a.createElement(S.b.Provider,{value:{size:u>=g?"1.5rem":"1.2rem"}},s===r?o.a.createElement(F.d,null):null)),o.a.createElement("span",{className:"PlayersListPlayerName"},i,t===s?" (You)":null,": ",m||0))}))}W.defaultProps={artistPid:null};var H=W,Y=t(90),z=t(89);t(159);function X(e){var n=e.gameCode,t=e.pid,r=e.artist,c=e.selectedWord,l=e.currRound,u=e.timer,s=Object(a.useState)("#000000"),m=Object(i.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)("brush"),b=Object(i.a)(p,2),v=b[0],g=b[1],E=Object(a.useRef)(null),C=Object(a.useRef)(!1),O=Object(a.useRef)(null),y=Object(a.useRef)(null),_=Object(a.useRef)([]);function j(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==r&&t===r._id)if(C.current=!0,document.body.style.userSelect="none",window.getSelection().removeAllRanges(),n)for(var a=0;a<1;++a)P(e,!1,a);else P(e,!1,-1)}function N(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==r&&t===r._id&&"bucket"!==v&&C.current)if(n)for(var a=0;a<1;++a)P(e,!0,a);else P(e,!0,-1)}function k(){null!==r&&t===r._id&&(document.body.style.userSelect="auto",C.current=!1)}function P(e,t,a){var o=function(e,n){var t,a,o=E.current.getBoundingClientRect();-1!==n?(t=e.touches[n].clientX,a=e.touches[n].clientY):(t=e.clientX,a=e.clientY);return{currX:(t-o.left)/(o.right-o.left)*E.current.width,currY:(a-o.top)/(o.bottom-o.top)*E.current.height}}(e,a),r=o.currX,c=o.currY;if("brush"===v){if(t&&null!==O.current&&null!==y.current){var l={prevX:O.current,prevY:y.current,currX:r,currY:c,newColor:d};R(l,!0),function(e,n){h.emit("send_draw_line",{gameCode:e,line:n})}(n,l)}else{var u={x:r,y:c,newColor:d};x(u,!0),function(e,n){h.emit("send_draw_dot",{gameCode:e,dot:n})}(n,u)}O.current=r,y.current=c}else{var i={x:r,y:c,newColor:d};M(i,!0),function(e,n){h.emit("send_draw_fill",{gameCode:e,fill:n})}(n,i)}}function R(e,n){var t=e.prevX,a=e.prevY,o=e.currX,r=e.currY,c=e.newColor,l=E.current.getContext("2d");l.beginPath(),l.strokeStyle=c,l.lineWidth=2,l.moveTo(t,a),l.lineTo(o,r),l.stroke(),l.closePath(),n&&_.current[_.current.length-1].points.push({x:o,y:r})}function x(e,n){var t=e.x,a=e.y,o=e.newColor,r=E.current.getContext("2d");r.beginPath(),r.fillStyle=o,r.fillRect(t,a,2,2),r.closePath(),n&&(_.current.push({points:[],newColor:o,brushStyle:"brush"}),_.current[_.current.length-1].points.push({x:t,y:a}))}function M(e,n){function t(e,n,t,a){return 0<=e&&e<t&&0<=n&&n<a}function a(e,n,t,a,o,r,c,l){var u=4*(n*t+e);return a.data[u+0]===o&&a.data[u+1]===r&&a.data[u+2]===c&&a.data[u+3]===l}var o=e.x,r=e.y,c=e.newColor;o=Math.floor(o),r=Math.floor(r);var l=E.current.getContext("2d"),u=E.current.getBoundingClientRect(),s=u.width,m=u.height;if(s=Math.floor(s),m=Math.floor(m),t(o,r,s,m)){var d=l.getImageData(0,0,s,m),f=function(e,n,t){var a=4*(n*s+e);return[t.data[a+0],t.data[a+1],t.data[a+2],t.data[a+3]]}(o,r,d),p=Object(i.a)(f,4),b=p[0],v=p[1],g=p[2],h=p[3],C=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],O={};O["".concat(o,"+").concat(r)]=1;var y=[[o,r]];for(l.beginPath(),l.fillStyle=c,l.fillRect(o,r,1,1);y.length;)for(var w=y.pop(),j=Object(i.a)(w,2),N=j[0],k=j[1],P=0,R=C;P<R.length;P++){var S=R[P],F=Object(i.a)(S,2),x=N+F[0],M=k+F[1];t(x,M,s,m)&&a(x,M,s,d,b,v,g,h)&&!O.hasOwnProperty("".concat(x,"+").concat(M))&&(l.fillRect(x,M,1,1),y.push([x,M]),O["".concat(x,"+").concat(M)]=1)}l.closePath(),n&&(_.current.push({points:[],newColor:c,brushStyle:"bucket"}),_.current[_.current.length-1].points.push({x:o,y:r}))}}function T(e){_.current.length&&(E.current.getContext("2d").clearRect(0,0,E.current.width,E.current.height),e&&(_.current=[]))}return Object(a.useEffect)(function(){return h.on("draw_line_announcement",function(e){null!==E.current&&R(e.line,!0)}),function(){h.off("draw_line_announcement")}},[]),Object(a.useEffect)(function(){return h.on("draw_dot_announcement",function(e){null!==E.current&&x(e.dot,!0)}),function(){h.off("draw_dot_announcement")}},[]),Object(a.useEffect)(function(){return h.on("draw_fill_announcement",function(e){null!==E.current&&M(e.fill,!0)}),function(){h.off("draw_fill_announcement")}},[]),Object(a.useEffect)(function(){return h.on("undo_canvas_announcement",function(){null!==E.current&&function(){if(_.current.length){T(!1),_.current.pop();for(var e=0;e<_.current.length;++e){var n=_.current[e],t=n.points,a=n.newColor;if("brush"===n.brushStyle){x({x:t[0].x,y:t[0].y,newColor:a},!1);for(var o=1;o<t.length;++o)R({prevX:t[o-1].x,prevY:t[o-1].y,currX:t[o].x,currY:t[o].y},!1)}else M({x:t[0].x,y:t[0].y,newColor:a},!1)}}}()}),function(){h.off("undo_canvas_announcement")}},[]),Object(a.useEffect)(function(){return h.on("clear_canvas_announcement",function(){null!==E.current&&T(!0)}),function(){h.off("clear_canvas_announcement")}},[]),Object(a.useEffect)(function(){null===c&&T(!0)},[r]),o.a.createElement(w,{className:"CanvasContainer"},o.a.createElement("div",{className:"CanvasHeader"},o.a.createElement("span",{className:"CanvasCurrRound"},"Round: ",l),o.a.createElement("span",{className:"CanvasUnderlinedWord"},"Word:"," ",null!==r&&t!==r._id&&null!==c?function(e){for(var n="",t=0;t<e.length;++t)" "===e[t]?n+="  ":n+="__",t+1!==e.length&&(n+="  ");return n}(c):c),o.a.createElement("span",{className:"CanvasTimer"},"Timer: ",u,"s")),o.a.createElement("canvas",{className:"Canvas",ref:E,onTouchStart:function(e){e.preventDefault(),j(e,!0)},onMouseDown:j,onTouchMove:function(e){e.preventDefault(),N(e,!0)},onMouseMove:N,onTouchEnd:function(e){e.preventDefault(),k()},onMouseUp:k,onMouseLeave:function(){O.current=null,y.current=null}}),o.a.createElement("div",{className:"CanvasDummy"}),o.a.createElement("div",{className:"CanvasControlsContainer"},o.a.createElement("div",{className:"CanvasColorsContainer"},["#000000","#FFFFFF","#808080","#C0C0C0","#FF0000","#FF7F00","#FFFF00","#00FF00","#00FFFF","#0000FF","#7F00FF","#FF00FF"].map(function(e){return o.a.createElement("button",{key:e,type:"button",style:{backgroundColor:e,color:null!==r&&t===r._id&&d===e?"#FFFFFF"!==e?"white":"black":e},className:"Button CanvasControl CanvasColorControl",disabled:null!==r&&t!==r._id,onClick:function(){f(e)}},o.a.createElement(S.b.Provider,{value:{size:"2.5vmin"}},o.a.createElement(F.a,null)))})),o.a.createElement("button",{type:"button",className:"Button CanvasControl",style:{backgroundColor:null!==r&&t===r._id&&"brush"===v?"#f64f59":"#ffffff"},onClick:function(){return g("brush")}},o.a.createElement(S.b.Provider,{value:{size:"5vmin"}},o.a.createElement(F.d,null))),o.a.createElement("button",{type:"button",className:"Button CanvasControl",style:{backgroundColor:null!==r&&t===r._id&&"bucket"===v?"#f64f59":"#ffffff"},onClick:function(){return g("bucket")}},o.a.createElement(S.b.Provider,{value:{size:"5vmin"}},o.a.createElement(z.a,null))),o.a.createElement("button",{type:"button",className:"Button CanvasControl",onClick:function(){_.current.length&&null!==r&&t===r._id&&function(e){h.emit("send_undo_canvas",{gameCode:e})}(n)}},o.a.createElement(S.b.Provider,{value:{size:"5vmin"}},o.a.createElement(Y.a,null))),o.a.createElement("button",{type:"button",className:"Button CanvasControl",onClick:function(){_.current.length&&null!==r&&t===r._id&&function(e){h.emit("send_clear_canvas",{gameCode:e})}(n)}},o.a.createElement(S.b.Provider,{value:{size:"5vmin"}},o.a.createElement(F.e,null))),null===r||t!==r._id?o.a.createElement("div",{className:"CanvasControlsOverlay"}):null))}X.defaultProps={artist:null,selectedWord:""};var A=X,J=t(91);t(160);var U=Object(N.a)({textField:{margin:"5px 0px","& .MuiOutlinedInput-root":{color:"black"},"& input":{padding:"7px"},"& label":{color:"black",transform:"translate(14px, 7px) scale(1)"},"& label.Mui-focused":{color:"black"}}}),K=Object(a.forwardRef)(function(e,n){var t=U(),r=e.gameCode,c=e.pid,l=e.addGuessedCorrectPid,u=Object(a.useState)(""),s=Object(i.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)([]),p=Object(i.a)(f,2),b=p[0],v=p[1],g=Object(a.useRef)(null),E=Object(a.useRef)(null);function C(e,n){var t={message:e,status:n};v(function(e){return[].concat(Object(J.a)(e),[t])}),g.current.scrollTop=g.current.scrollHeight}function O(){!function(e,n,t){h.emit("send_message",{gameCode:e,pid:n,message:t})}(r,c,m),d(""),E.current.focus()}return Object(a.useImperativeHandle)(n,function(){return{addMessage:C}}),Object(a.useEffect)(function(){return h.on("send_message_announcement",function(e){C("".concat(e.player.playerName,": ").concat(e.message),"")}),function(){h.off("send_message_announcement")}},[]),Object(a.useEffect)(function(){return h.on("correct_word_announcement",function(e){C("".concat(e.player.playerName," has guessed the word!"),"Correct"),l(e.player._id)}),function(){h.off("correct_word_announcement")}},[l]),o.a.createElement(w,{className:"ChatRoom",ref:n},o.a.createElement("div",{className:"ChatRoomMessageArea",ref:g},b.map(function(e,n){return o.a.createElement("p",{key:"msg".concat(n),className:"ChatRoomMessage ChatRoomMessage".concat(e.status)},e.message)})),o.a.createElement(R,{className:"".concat(t.textField," ChatRoomTextField"),label:"message",variant:"outlined",value:m,onChange:function(e){return d(e.target.value)},inputRef:E,onKeyDown:function(e){return function(e){13===e.keyCode&&""!==m&&O()}(e)}}))});K.displayName="ChatRoom";var q=K;t(161);function V(e){var n=e.gameCode,t=e.pid,a=e.artist,r=e.words,c=e.endTurnData,l=e.endGameData,u=e.onBackRoom;function i(){return o.a.createElement(o.a.Fragment,null,r.map(function(e){return o.a.createElement("button",{type:"button",key:e,className:"Button OverlayWordButton",onClick:function(){return function(e,n){h.emit("send_selected_word",{gameCode:e,word:n})}(n,e)}},e)}))}return o.a.createElement(w,{className:"Overlay"},null!==l?o.a.createElement("div",{className:"OverlayEndTurnResultsContainer"},l.players.map(function(e,n){return o.a.createElement("p",{key:e._id,className:"OverlayEndTurnResultsText"},"#",l.rankings[n]," ",e.playerName,": ",e.score)}),o.a.createElement("button",{type:"button",className:"Button OverlayEndTurnResultsButton",onClick:u},"Back to Room")):null!==c?o.a.createElement("div",{className:"OverlayEndTurnResultsContainer"},o.a.createElement("p",{className:"OverlayEndTurnResultsText"},"Selected Word: ",c.selectedWord),c.players.map(function(e){return o.a.createElement("p",{key:e._id,className:"OverlayEndTurnResultsText"},e.playerName,": ",e.score," + ",e.earnedScore)})):null===a?o.a.createElement("p",null,"Loading..."):t!==a._id?o.a.createElement("p",null,a.playerName," is choosing their word..."):i())}V.defaultProps={artist:null,endTurnData:null,endGameData:null};var $=V;t(162);var Q=function(){var e=Object(u.g)().state,n=e.gameCode,t=e.pid,r=e.ownerPid,c=e.drawTime,s=Object(a.useState)(e.players),m=Object(i.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)(null),b=Object(i.a)(p,2),v=b[0],g=b[1],C=Object(a.useState)(!1),O=Object(i.a)(C,2),y=O[0],_=O[1],w=Object(a.useState)([]),j=Object(i.a)(w,2),N=j[0],k=j[1],P=Object(a.useState)(c),R=Object(i.a)(P,2),S=R[0],F=R[1],x=Object(a.useState)(new Array(d.length).fill(1)),M=Object(i.a)(x,2),T=M[0],I=M[1],G=Object(a.useState)(null),B=Object(i.a)(G,2),L=B[0],D=B[1],W=Object(a.useState)({}),Y=Object(i.a)(W,2),z=Y[0],X=Y[1],J=Object(a.useState)(null),U=Object(i.a)(J,2),K=U[0],V=U[1],Q=Object(a.useState)(null),Z=Object(i.a)(Q,2),ee=Z[0],ne=Z[1],te=Object(a.useState)(1),ae=Object(i.a)(te,2),oe=ae[0],re=ae[1],ce=Object(a.useRef)(null),le=Object(u.f)();return Object(a.useEffect)(function(){!function(e){h.emit("send_enter_game",{gameCode:e})}(n)},[]),Object(a.useEffect)(function(){return h.on("next_artist_announcement",function(e){var n;console.log("got next artist"),console.log(e),n=e.players,f(n.map(function(e){return e.score=e.score+e.earnedScore,e})),I(e.rankings),D(null),ne(null),g(e.artist),k(e.words),X({}),re(e.currRound)}),function(){h.off("next_artist_announcement")}},[]),Object(a.useEffect)(function(){return h.on("selected_word_announcement",function(e){_(!0),ne(e.selectedWord)}),function(){h.off("selected_word_announcement")}},[]),Object(a.useEffect)(function(){return h.on("timer_announcement",function(e){F(e.time)}),function(){h.off("timer_announcement")}},[]),Object(a.useEffect)(function(){return h.on("end_turn_announcement",function(e){D(e),_(!1)}),function(){h.off("end_turn_announcement")}},[]),Object(a.useEffect)(function(){return h.on("end_game_announcement",function(e){V(e)}),function(){h.off("end_game_announcement")}},[]),Object(a.useEffect)(function(){return h.on("disconnect_announcement",function(e){console.log(e)}),function(){h.off("disconnect_announcement")}},[]),Object(a.useEffect)(function(){return h.on("disconnect_announcement",function(e){console.log(e),f(e.players),I(e.rankings),console.log(ce),console.log(ce.current);var n="".concat(e.playerName," has disconnected");ce.current.addMessage(n,"Disconnected")}),function(){h.off("disconnect_announcement")}},[ce]),o.a.createElement("div",{className:"Game"},o.a.createElement(l.b,{to:"/",className:"GameTitleLink"},"Pictionary Live"),o.a.createElement("h2",{className:"GameGameCode"},"Game Code: ",n),o.a.createElement("div",{className:"GamePlayContainer"},o.a.createElement("div",{className:"GameDummyPlayer"}),o.a.createElement("div",{className:"GameCanvasOverlayContainer"},o.a.createElement(A,{gameCode:n,pid:t,artist:v,selectedWord:ee,currRound:oe,timer:S}),y?null:o.a.createElement($,{gameCode:n,pid:t,artist:v,words:N,endTurnData:L,endGameData:K,onBackRoom:function(){E(n,t,function(){var e=!0,n=!1,a=void 0;try{for(var o,r=d[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var c=o.value;if(c._id===t)return c.playerName}}catch(l){n=!0,a=l}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}return null}(),le)}})),o.a.createElement("div",{className:"GameDummyChat"}),o.a.createElement("div",{className:"GamePlayersChatContainer"},o.a.createElement(H,{players:d,pid:t,ownerPid:r,artistPid:null!==v?v._id:null,guessedCorrectPids:z,rankings:T}),o.a.createElement(q,{gameCode:n,pid:t,addGuessedCorrectPid:function(e){X(function(n){return n[e]=!0,n})},ref:ce}))))};t(163);var Z=function(){var e=y().height;return o.a.createElement(l.a,null,o.a.createElement("div",{className:"App",style:{height:e}},o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/"},o.a.createElement(M,null)),o.a.createElement(u.a,{path:"/room"},o.a.createElement(D,null)),o.a.createElement(u.a,{path:"/game"},o.a.createElement(Q,null)))))},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}t(164);var te=document.getElementById("root");c.a.render(o.a.createElement(Z,null),te),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("","/service-worker.js");ee?(function(e,n){fetch(e).then(function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ne(n,e)})}}()},35:function(e,n,t){},96:function(e,n,t){e.exports=t(165)}},[[96,1,2]]]);
//# sourceMappingURL=main.d91b800e.chunk.js.map